<!doctype html>
<html lang="en" class="dark">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DoS/DDoS Simulator</title>
  <link rel="stylesheet" href="./css/main.css">
</head>
<body class="bg-slate-950 text-slate-100 min-h-screen">
  <header class="border-b border-slate-800 bg-slate-900/70 backdrop-blur sticky top-0 z-10">
    <div class="max-w-screen-2xl mx-auto px-6 py-4 flex items-center justify-between">
      <div>
        <p class="text-sm uppercase tracking-[0.2em] text-emerald-300">DoS/DDoS Simulator</p>
        <h1 class="text-xl font-semibold text-slate-50">Network Resilience Sandbox</h1>
      </div>
      <div class="flex items-center gap-3 text-sm">
        <button id="btn-start-simulation" class="px-4 py-2 rounded-md bg-emerald-600 hover:bg-emerald-700 text-white shadow transition">Start Simulation</button>
        <button id="btn-stop-simulation" class="px-4 py-2 rounded-md bg-amber-600 hover:bg-amber-700 text-white shadow transition hidden">Stop Simulation</button>
        <button id="btn-start-attack" class="px-4 py-2 rounded-md bg-red-600 hover:bg-red-700 text-white shadow transition" disabled>Start Attack</button>
        <button id="btn-stop-attack" class="px-4 py-2 rounded-md bg-slate-600 hover:bg-slate-700 text-white shadow transition hidden">Stop Attack</button>
        <button id="btn-reset" class="px-4 py-2 rounded-md bg-slate-800 hover:bg-slate-700 text-slate-100 border border-slate-700 transition">Reset</button>
      </div>
    </div>
  </header>

  <main class="max-w-screen-2xl mx-auto px-6 py-6">
    <div class="grid grid-cols-12 gap-4">
      <!-- Left Panel: Attacker Configuration -->
      <section id="panel-attacker" class="col-span-12 lg:col-span-3 bg-slate-900 border border-slate-800 rounded-xl p-4 space-y-4">
        <div>
          <h2 class="text-lg font-semibold mb-1">Attacker</h2>
          <p class="text-sm text-slate-400">Configure attack parameters</p>
        </div>

        <!-- Attack Scale Indicator -->
        <div class="flex items-center justify-center py-3 bg-slate-950/60 border border-slate-800 rounded-lg">
          <div id="attacker-icon" class="text-4xl" title="Attack scale indicator">ðŸ‘¤</div>
        </div>

        <div class="space-y-4">
          <div>
            <label class="block text-sm font-medium mb-2">Device Count: <span id="device-count-value" class="text-emerald-400">1</span></label>
            <input type="range" id="slider-device-count" min="1" max="1000" value="1" class="w-full">
          </div>

          <div>
            <label class="block text-sm font-medium mb-2">Attack Type</label>
            <select id="dropdown-attack-type" class="w-full px-3 py-2 bg-slate-800 border border-slate-700 rounded-md text-slate-100">
              <option value="UDP">UDP Flood</option>
              <option value="TCP_SYN">TCP SYN Flood</option>
              <option value="ICMP">ICMP Flood</option>
            </select>
          </div>

          <div>
            <label class="block text-sm font-medium mb-2">Target IP Address</label>
            <input type="text" id="input-target-ip" value="203.0.113.10" class="w-full px-3 py-2 bg-slate-800 border border-slate-700 rounded-md text-slate-100 font-mono text-sm" placeholder="203.0.113.10">
          </div>

          <div>
            <label class="block text-sm font-medium mb-2">Attack Bandwidth: <span id="attack-bandwidth-value" class="text-emerald-400">1.0x</span></label>
            <input type="range" id="slider-attack-bandwidth" min="0.5" max="2.0" step="0.1" value="1.0" class="w-full">
          </div>

          <div>
            <h3 class="text-sm font-medium mb-2">Botnet Ranges</h3>
            <div id="botnet-ranges" class="text-xs text-slate-400 font-mono max-h-32 overflow-y-auto space-y-1">
              <p class="text-slate-500">Not attacking</p>
            </div>
          </div>
        </div>
      </section>

      <!-- Middle Panel: Network Visualization -->
      <section id="panel-network" class="col-span-12 lg:col-span-6 bg-slate-900 border border-slate-800 rounded-xl p-4 space-y-4">
        <div>
          <h2 class="text-lg font-semibold mb-1">Network Visualization</h2>
          <p class="text-sm text-slate-400">Real-time packet flow</p>
        </div>

        <div class="rounded-lg border border-slate-800 bg-slate-950/60 flex items-center justify-center">
          <canvas id="canvas" class="max-w-full h-auto"></canvas>
        </div>

        <div class="grid grid-cols-2 gap-3">
          <!-- Legend -->
          <div class="rounded bg-slate-800/60 border border-slate-700 p-3">
            <h3 class="text-sm font-semibold mb-2">Legend</h3>
            <div id="legend" class="space-y-2 text-xs"></div>
          </div>

          <!-- Traffic Stats -->
          <div class="rounded bg-slate-800/60 border border-slate-700 p-3">
            <h3 class="text-sm font-semibold mb-2">Network Stats</h3>
            <div class="space-y-1 text-xs">
              <div class="flex justify-between">
                <span class="text-slate-400">Active Packets:</span>
                <span id="stat-active-packets" class="text-emerald-400 font-mono">0</span>
              </div>
              <div class="flex justify-between">
                <span class="text-slate-400">Bandwidth:</span>
                <span id="stat-bandwidth" class="text-emerald-400 font-mono">0%</span>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Right Panel: Server & Firewall -->
      <section id="panel-server" class="col-span-12 lg:col-span-3 bg-slate-900 border border-slate-800 rounded-xl p-4 space-y-4">
        <div>
          <h2 class="text-lg font-semibold mb-1">Server</h2>
          <p class="text-sm text-slate-400">Resource usage and status</p>
        </div>

        <!-- Server IP Info (v1.2) -->
        <div class="space-y-1 py-1 border-b border-slate-800">
          <div class="flex justify-between text-xs">
            <span class="text-slate-400">Public IP:</span>
            <span id="display-public-ip" class="text-emerald-400 font-mono">203.0.113.10</span>
          </div>
          <div class="flex justify-between text-xs">
            <span class="text-slate-400">Origin IP:</span>
            <span id="display-origin-ip" class="text-slate-500 font-mono">203.0.113.10</span>
          </div>
        </div>

        <div class="space-y-3">
          <!-- Status Badge -->
          <div>
            <span id="server-status" class="inline-block px-3 py-1 rounded-full text-xs font-semibold bg-emerald-900 text-emerald-300">ONLINE</span>
          </div>

          <!-- Server IP Addresses (v1.2) -->
          <div class="space-y-1 py-1 border-b border-slate-800 pb-2">
            <div class="flex justify-between text-xs">
               <span class="text-slate-400">Origin IP:</span>
               <span id="server-origin-ip" class="font-mono text-slate-200">203.0.113.10</span>
            </div>
            <div id="server-public-ip-row" class="flex justify-between text-xs hidden">
               <span class="text-slate-400">Public IP:</span>
               <span id="server-public-ip" class="font-mono text-cyan-400">198.51.100.20</span>
            </div>
          </div>

          <!-- Server Bandwidth Capacity -->
          <div>
            <label class="block text-sm font-medium mb-2">Server Capacity: <span id="server-capacity-value" class="text-emerald-400">1.0x</span></label>
            <input type="range" id="slider-server-capacity" min="0.5" max="5.0" step="0.5" value="1.0" class="w-full">
            <p class="text-xs text-slate-500 mt-1">Upgrade server bandwidth capacity</p>
          </div>

          <!-- Bandwidth Bar -->
          <div>
            <div class="flex justify-between text-sm mb-1">
              <span class="text-slate-400">Bandwidth</span>
              <span id="bandwidth-value" class="text-emerald-400 font-mono">0%</span>
            </div>
            <div class="h-4 bg-slate-800 rounded-full overflow-hidden">
              <div id="bandwidth-bar" class="h-full bg-emerald-500 transition-all duration-150" style="width: 0%"></div>
            </div>
          </div>

          <!-- CPU Bar -->
          <div>
            <div class="flex justify-between text-sm mb-1">
              <span class="text-slate-400">CPU / RAM</span>
              <span id="cpu-value" class="text-emerald-400 font-mono">0%</span>
            </div>
            <div class="h-4 bg-slate-800 rounded-full overflow-hidden">
              <div id="cpu-bar" class="h-full bg-emerald-500 transition-all duration-150" style="width: 0%"></div>
            </div>
          </div>

          <!-- Happiness Score -->
          <div>
            <div class="flex justify-between text-sm mb-1">
              <span class="text-slate-400">User Happiness</span>
              <span id="happiness-value" class="text-emerald-400 font-mono">100%</span>
            </div>
            <div class="h-4 bg-slate-800 rounded-full overflow-hidden">
              <div id="happiness-bar" class="h-full bg-emerald-500 transition-all duration-150" style="width: 100%"></div>
            </div>
          </div>

          <!-- User Logs -->
          <div>
            <h3 class="text-sm font-semibold mb-2">User Activity</h3>
            <div id="user-logs" class="text-xs font-mono text-slate-400 bg-slate-950/60 border border-slate-800 rounded p-2 h-32 overflow-y-auto space-y-1"></div>
          </div>
        </div>

        <!-- Firewall Dashboard (Collapsible) -->
        <div class="border-t border-slate-800 pt-4">
          <button id="btn-toggle-firewall" class="w-full flex items-center justify-between text-sm font-semibold mb-3 hover:text-emerald-400 transition">
            <span>Firewall & Mitigation</span>
            <span id="firewall-toggle-icon">â–¼</span>
          </button>

          <div id="firewall-dashboard" class="hidden space-y-4">
            <!-- Protocol Filters -->
            <div>
              <h4 class="text-xs font-semibold text-slate-400 mb-2">Block Protocols</h4>
              <div class="space-y-2">
                <label class="flex items-center text-sm">
                  <input type="checkbox" id="check-block-tcp" class="mr-2">
                  <span>Block TCP</span>
                  <span class="ml-auto text-xs text-amber-400">âš  Blocks web traffic</span>
                </label>
                <label class="flex items-center text-sm">
                  <input type="checkbox" id="check-block-udp" class="mr-2">
                  <span>Block UDP</span>
                </label>
                <label class="flex items-center text-sm">
                  <input type="checkbox" id="check-block-icmp" class="mr-2">
                  <span>Block ICMP</span>
                </label>
              </div>
            </div>

            <!-- IP Blacklist -->
            <div>
              <h4 class="text-xs font-semibold text-slate-400 mb-2">Detected Subnets</h4>
              <div id="ip-blacklist" class="text-xs font-mono text-slate-400 max-h-32 overflow-y-auto space-y-1">
                <p class="text-slate-500">No traffic detected</p>
              </div>
            </div>

            <!-- Rate Limiting -->
            <div>
              <label class="flex items-center text-sm mb-2">
                <input type="checkbox" id="check-rate-limit" class="mr-2">
                <span>Rate Limiting</span>
              </label>
              <div id="rate-limit-controls" class="hidden space-y-2">
                <label class="block text-xs text-slate-400">Threshold: <span id="rate-limit-value" class="text-emerald-400">20</span> req/sec</label>
                <input type="range" id="slider-rate-limit" min="5" max="50" value="20" class="w-full">
                <label class="block text-xs text-slate-400 mt-2">Apply To:</label>
                <select id="dropdown-rate-limit-scope" class="w-full px-2 py-1 bg-slate-800 border border-slate-700 rounded text-xs text-slate-100">
                  <option value="ALL">All Protocols</option>
                  <option value="TCP">TCP Only</option>
                  <option value="UDP">UDP Only</option>
                  <option value="ICMP">ICMP Only</option>
                </select>
              </div>
            </div>

            <!-- Load Balancing -->
            <div>
              <label class="flex items-center text-sm">
                <input type="checkbox" id="check-load-balancing" class="mr-2">
                <span>Load Balancing</span>
              </label>
            </div>

            <!-- Reverse Proxy (v1.2) -->
            <div>
              <label class="flex items-center text-sm">
                <input type="checkbox" id="check-reverse-proxy" class="mr-2">
                <span>Reverse Proxy / DDoS Protection</span>
              </label>
            </div>

            <!-- Reverse Proxy / DDoS Protection (v1.2) -->
            <div>
              <label class="flex items-center text-sm">
                <input type="checkbox" id="check-reverse-proxy" class="mr-2">
                <span>Reverse Proxy Protection</span>
              </label>
              <p class="text-xs text-slate-500 ml-6 mt-1">
                Hides Origin IP. Filters traffic at edge.
              </p>
            </div>

            <!-- Traffic Analyzer -->
            <div>
              <h4 class="text-xs font-semibold text-slate-400 mb-2">Traffic Analyzer</h4>
              <div id="analyzer-logs" class="text-xs font-mono text-slate-400 bg-slate-950/60 border border-slate-800 rounded p-2 h-32 overflow-y-auto space-y-1">
                <p class="text-slate-500">No traffic</p>
              </div>
            </div>
          </div>
        </div>
      </section>
    </div>
  </main>

  <script type="module" src="./js/main.js"></script>
</body>
</html>
